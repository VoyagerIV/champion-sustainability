{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useOnProgressChange = useOnProgressChange;\nvar _reactNativeReanimated = require(\"react-native-reanimated\");\nvar _computedWithAutoFillData = require(\"../utils/computedWithAutoFillData\");\nfunction useOnProgressChange(opts) {\n  var autoFillData = opts.autoFillData,\n    loop = opts.loop,\n    offsetX = opts.offsetX,\n    size = opts.size,\n    rawDataLength = opts.rawDataLength,\n    onProgressChange = opts.onProgressChange;\n  (0, _reactNativeReanimated.useAnimatedReaction)(function () {\n    var _f = function _f() {\n      return offsetX.value;\n    };\n    _f._closure = {\n      offsetX: offsetX\n    };\n    _f.asString = \"function _f(){const{offsetX}=jsThis._closure;{return offsetX.value;}}\";\n    _f.__workletHash = 11091407603539;\n    _f.__location = \"/Users/zhaodonghao/code/github/react-native-reanimated-carousel/src/hooks/useOnProgressChange.ts (23:4)\";\n    return _f;\n  }(), function () {\n    var _f = function _f(_value) {\n      var value = (0, _computedWithAutoFillData.computedOffsetXValueWithAutoFillData)({\n        value: _value,\n        rawDataLength: rawDataLength,\n        size: size,\n        autoFillData: autoFillData,\n        loop: loop\n      });\n      if (!loop) {\n        value = Math.max(-((rawDataLength - 1) * size), Math.min(value, 0));\n      }\n      var absoluteProgress = Math.abs(value / size);\n      if (value > 0) absoluteProgress = rawDataLength - absoluteProgress;\n      if (onProgressChange) (0, _reactNativeReanimated.runOnJS)(onProgressChange)(value, absoluteProgress);\n    };\n    _f._closure = {\n      computedOffsetXValueWithAutoFillData: _computedWithAutoFillData.computedOffsetXValueWithAutoFillData,\n      rawDataLength: rawDataLength,\n      size: size,\n      autoFillData: autoFillData,\n      loop: loop,\n      onProgressChange: onProgressChange,\n      runOnJS: _reactNativeReanimated.runOnJS\n    };\n    _f.asString = \"function _f(_value){const{computedOffsetXValueWithAutoFillData,rawDataLength,size,autoFillData,loop,onProgressChange,runOnJS}=jsThis._closure;{let value=computedOffsetXValueWithAutoFillData({value:_value,rawDataLength:rawDataLength,size:size,autoFillData:autoFillData,loop:loop});if(!loop){value=Math.max(-((rawDataLength-1)*size),Math.min(value,0));}let absoluteProgress=Math.abs(value/size);if(value>0)absoluteProgress=rawDataLength-absoluteProgress;if(onProgressChange)runOnJS(onProgressChange)(value,absoluteProgress);}}\";\n    _f.__workletHash = 4815839705374;\n    _f.__location = \"/Users/zhaodonghao/code/github/react-native-reanimated-carousel/src/hooks/useOnProgressChange.ts (24:4)\";\n    return _f;\n  }(), [loop, autoFillData, rawDataLength, onProgressChange]);\n}","map":{"version":3,"mappings":";;;;AACA;AAMA;AAEO,SAASA,mBAAT,CACLC,IADK,EAQL;EACA,IAAQC,YAAR,GACQD,IADR,CAAQC,YAAR;IAAsBC,IAAtB,GACQF,IADR,CAAsBE,IAAtB;IAA4BC,OAA5B,GACQH,IADR,CAA4BG,OAA5B;IAAqCC,IAArC,GACQJ,IADR,CAAqCI,IAArC;IAA2CC,aAA3C,GACQL,IADR,CAA2CK,aAA3C;IAA0DC,gBAA1D,GACQN,IADR,CAA0DM,gBAA1D;EAGA;IAAA,SACE;MAAA,OAAMH,OAAO,CAACI,KAAd;IAAA,CADF;IAAAC;MAAAL,SApBKA;IAoBL;IAAAK;IAAAA;IAAAA;IAAA;EAAA;IAAA,qBAEGC,MAFH,EAEc;MACV,IAAIF,KAAK,GAAG,oEAAqC;QAC/CA,KAAK,EAAEE,MADwC;QAE/CJ,aAAa,EAAbA,aAF+C;QAG/CD,IAAI,EAAJA,IAH+C;QAI/CH,YAAY,EAAZA,YAJ+C;QAK/CC,IAAI,EAAJA;MAL+C,CAArC,CAAZ;MAQA,IAAI,CAACA,IAAL,EAAW;QACTK,KAAK,GAAGG,IAAI,CAACC,GAAL,CACN,EAAE,CAACN,aAAa,GAAG,CAAjB,IAAsBD,IAAxB,CADM,EAENM,IAAI,CAACE,GAAL,CAASL,KAAT,EAAgB,CAAhB,CAFM,CAAR;MAID;MAED,IAAIM,gBAAgB,GAAGH,IAAI,CAACI,GAAL,CAASP,KAAK,GAAGH,IAAjB,CAAvB;MAEA,IAAIG,KAAK,GAAG,CAAZ,EACEM,gBAAgB,GAAGR,aAAa,GAAGQ,gBAAnC;MAEF,IAAIP,gBAAJ,EACE,oCAAQA,gBAAR,EAA0BC,KAA1B,EAAiCM,gBAAjC;IACH,CAzBH;IAAAL;MAAAO,sCAnBYA,8DAmBZ;MAAAV,eANkCA,aAMlC;MAAAD,MAPwCA,IAOxC;MAAAH,cAfEA,YAeF;MAAAC,MAXKA,IAWL;MAAAI,kBAL8BA,gBAK9B;MAAAU,SALsBA;IAKtB;IAAAR;IAAAA;IAAAA;IAAA;EAAA,KA0BE,CAACN,IAAD,EAAOD,YAAP,EAAqBI,aAArB,EAAoCC,gBAApC,CA1BF;AA4BD","names":["useOnProgressChange","opts","autoFillData","loop","offsetX","size","rawDataLength","onProgressChange","value","_f","_value","Math","max","min","absoluteProgress","abs","computedOffsetXValueWithAutoFillData","runOnJS"],"sources":["useOnProgressChange.ts"],"sourcesContent":["import type Animated from \"react-native-reanimated\";\nimport {\n  runOnJS,\n  useAnimatedReaction,\n} from \"react-native-reanimated\";\n\nimport type { TCarouselProps } from \"../types\";\nimport { computedOffsetXValueWithAutoFillData } from \"../utils/computedWithAutoFillData\";\n\nexport function useOnProgressChange(\n  opts: {\n    size: number\n    autoFillData: boolean\n    loop: boolean\n    offsetX: Animated.SharedValue<number>\n    rawDataLength: number\n  } & Pick<TCarouselProps, \"onProgressChange\">,\n) {\n  const { autoFillData, loop, offsetX, size, rawDataLength, onProgressChange }\n        = opts;\n\n  useAnimatedReaction(\n    () => offsetX.value,\n    (_value) => {\n      let value = computedOffsetXValueWithAutoFillData({\n        value: _value,\n        rawDataLength,\n        size,\n        autoFillData,\n        loop,\n      });\n\n      if (!loop) {\n        value = Math.max(\n          -((rawDataLength - 1) * size),\n          Math.min(value, 0),\n        );\n      }\n\n      let absoluteProgress = Math.abs(value / size);\n\n      if (value > 0)\n        absoluteProgress = rawDataLength - absoluteProgress;\n\n      if (onProgressChange)\n        runOnJS(onProgressChange)(value, absoluteProgress);\n    },\n    [loop, autoFillData, rawDataLength, onProgressChange],\n  );\n}\n"]},"metadata":{},"sourceType":"script"}